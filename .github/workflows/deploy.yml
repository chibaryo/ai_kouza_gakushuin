name: Deploy Slidev to GitHub Pages

on:
  push:
    branches: [ main, master ]

jobs:
  deploy:
    runs-on: ubuntu-latest  # âœ… å•é¡Œãªã—
    
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'  # âœ… æœ€æ–°LTSï¼ˆ18ã§ã‚‚å¯ï¼‰
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci
      
      - name: Build multiple slides
        run: |
          # å„ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰
          npx slidev build slides_1.md --base /${{ github.event.repository.name }}/slides_1/ --out dist/slides_1
          npx slidev build slides_2.md --base /${{ github.event.repository.name }}/slides_2/ --out dist/slides_2
          
          # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ä½œæˆ
          echo '<!DOCTYPE html>
          <html>
          <head><title>AIè¬›ç¾©è³‡æ–™</title></head>
          <body>
            <h1>ğŸ“š AIè¬›ç¾©è³‡æ–™ä¸€è¦§</h1>
            <ul>
              <li><a href="slides_1/">ç¬¬1å›: AIå…¥é–€</a></li>
              <li><a href="slides_2/">ç¬¬2å›: æ©Ÿæ¢°å­¦ç¿’åŸºç¤</a></li>
            </ul>
          </body>
          </html>' > dist/index.html

      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist